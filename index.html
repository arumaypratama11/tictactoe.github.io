<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tic Tac Toe | Shitteam</title>
    <link rel="stylesheet" href="tictactoe.css" />
  </head>
  <body>
    <div id="kotak">
      <div id="tombol" onclick="btnklik(1)">
        <button id="btn1D" class="depan"></button>
        <button id="btn1B" class="belakang"></button>
      </div>
      <div id="tombol" onclick="btnklik(2)">
        <button id="btn2D" class="depan"></button>
        <button id="btn2B" class="belakang"></button>
      </div>
      <div id="tombol" onclick="btnklik(3)">
        <button id="btn3D" class="depan"></button>
        <button id="btn3B" class="belakang"></button>
      </div>
      <div id="tombol" onclick="btnklik(4)">
        <button id="btn4D" class="depan"></button>
        <button id="btn4B" class="belakang"></button>
      </div>
      <div id="tombol" onclick="btnklik(5)">
        <button id="btn5D" class="depan"></button>
        <button id="btn5B" class="belakang"></button>
      </div>
      <div id="tombol" onclick="btnklik(6)">
        <button id="btn6D" class="depan"></button>
        <button id="btn6B" class="belakang"></button>
      </div>
      <div id="tombol" onclick="btnklik(7)">
        <button id="btn7D" class="depan"></button>
        <button id="btn7B" class="belakang"></button>
      </div>
      <div id="tombol" onclick="btnklik(8)">
        <button id="btn8D" class="depan"></button>
        <button id="btn8B" class="belakang"></button>
      </div>
      <div id="tombol" onclick="btnklik(9)">
        <button id="btn9D" class="depan"></button>
        <button id="btn9B" class="belakang"></button>
      </div>
      </div>
    </div>

    <h1 id="ket"></h1>

    <script>
        const pop = new Audio();
        pop.src="sound/pop.mp3";
        const win = new Audio();
        win.src="sound/win.mp3";

        let pemain = "X";

        document.getElementById("ket").innerHTML= pemain + " Turn";

        function btnklik(x){
            pop.play();

            document.getElementById("btn"+x+"D").style.transform=
            "perspective(600px) rotateY(-180deg)";

            document.getElementById("btn"+x+"B").style.transform=
            "perspective(600px) rotateY(0deg)";

            document.getElementById("btn"+x+"B").innerHTML= pemain;
            
            document.getElementById("btn"+x+"B").value=pemain;

            document.getElementById("btn"+x+"B").disabled="disabled";

            if(pemain === "X"){
                document.getElementById("ket").innerHTML="O Turn";
                cekMenang();
                pemain = "O";
            }else{
                document.getElementById("ket").innerHTML="X Turn";
                cekMenang();
                pemain = "X";
            }
        }

        function cekMenang(){
            if(
            document.getElementById("btn1B").value==pemain &&
            document.getElementById("btn2B").value==pemain &&
            document.getElementById("btn3B").value==pemain
            ){
                menang(1,2,3);
            }else if(
            document.getElementById("btn4B").value==pemain &&
            document.getElementById("btn5B").value==pemain &&
            document.getElementById("btn6B").value==pemain
            ){
                menang(4,5,6);
            }else if(
            document.getElementById("btn7B").value==pemain &&
            document.getElementById("btn8B").value==pemain &&
            document.getElementById("btn9B").value==pemain
            ) {
                menang(7,8,9);
            }else if(
            document.getElementById("btn1B").value==pemain &&
            document.getElementById("btn4B").value==pemain &&
            document.getElementById("btn7B").value==pemain
            ){
                menang(1,4,7);
            }
            else if(
            document.getElementById("btn2B").value==pemain &&
            document.getElementById("btn5B").value==pemain &&
            document.getElementById("btn8B").value==pemain
            ){
                menang(2,5,8);
            }else if(
            document.getElementById("btn3B").value==pemain &&
            document.getElementById("btn6B").value==pemain &&
            document.getElementById("btn9B").value==pemain
            ){
                menang(3,6,9);
            }
            else if(
            document.getElementById("btn1B").value==pemain &&
            document.getElementById("btn5B").value==pemain &&
            document.getElementById("btn9B").value==pemain
            ){
                menang(1,5,9);
            }else if(
            document.getElementById("btn3B").value==pemain &&
            document.getElementById("btn5B").value==pemain &&
            document.getElementById("btn7B").value==pemain
            ){
                menang(3,5,7);
            }
        }

        function menang(a,b,c){
            win.play();

            document.getElementById("ket").innerHTML=pemain + " Win";

            for(i=1; i<10; i++){
                document.getElementById("btn"+i+"D").disabled="disabled";
            }

            let x = 1;
            function animasi(){
                if(x == 1){
                    document.getElementById("btn"+a+"B").style.background="#ccc";
                    document.getElementById("btn"+b+"B").style.background="#666";
                    document.getElementById("btn"+c+"B").style.background="#999";
                    x=2;
                }else if(x==2){
                    document.getElementById("btn"+c+"B").style.background="#ccc";
                    document.getElementById("btn"+a+"B").style.background="#666";
                    document.getElementById("btn"+b+"B").style.background="#999";
                    x=3;
                }else if(x==3){
                    document.getElementById("btn"+b+"B").style.background="#ccc";
                    document.getElementById("btn"+c+"B").style.background="#666";
                    document.getElementById("btn"+a+"B").style.background="#999";
                    x=1;
                }
            }
            setInterval(animasi, 150);

        }
    </script>
  </body>
</html>
